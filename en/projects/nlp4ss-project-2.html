
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Climate Risk Analysis of Sierra Club Press Releases &#8212; NLP for Social Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-examples.css?v=e236af4b" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-shadow.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-punk.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-noir.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-borderless.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/micromodal.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/language_selector.css?v=6a8ebae4" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/js/hoverxref.js"></script>
    <script src="../_static/js/tooltipster.bundle.min.js"></script>
    <script src="../_static/js/micromodal.min.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-BQJE5V9RK2"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-BQJE5V9RK2');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-BQJE5V9RK2');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"tex": {"macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'projects/nlp4ss-project-2';</script>
    <script src="../_static/language_switcher.js?v=ff97be19"></script>
    <script src="../_static/chat.js?v=f0de43d7"></script>
    <link rel="icon" href="https://assets.entelecheia.ai/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Course Syllabus" href="../syllabus/index.html" />
    <link rel="prev" title="NLP Analysis of Sierra Club Press Releases" href="nlp4ss-project-1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <script src="/_static/language_switcher.js"></script>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
<div class="sidebar-lang-select">  <nav class="menu">    <ul class="clearfix">      <li class="current-item">        <a href="#" class="clicker">          English <span class="arrow">&#9660;</span>        </a>        <ul class="sub-menu">                    <li><a href="#" onclick="switchLanguage('en'); return false;">English</a></li>        </ul>      </li>    </ul>  </nav></div>
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">NLP for Social Science</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Home
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lecture Notes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../session01/index.html">Session 1 - Introduction to NLP for Social Science</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../session01/lecture1.html">1.1 Fundamentals of NLP and its Evolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session01/lecture2.html">1.2 Overview of Generative LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session01/lecture3.html">1.3 Ethical Considerations and Challenges in Using LLMs for Research</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../session02/index.html">Session 2: Traditional NLP Techniques and Text Preprocessing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../session02/lecture1.html">2.1 Text Cleaning, Normalization, and Representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session02/lecture2.html">2.2 Basic NLP Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session02/lecture3.html">2.3 Topic Modeling and Latent Dirichlet Allocation (LDA)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../session03/index.html">Session 3: LLMs for Data Annotation and Classification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../session03/lecture1.html">3.1 Zero-shot Learning with LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session03/lecture2.html">3.2 Few-shot Learning and Prompt Engineering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session03/lecture3.html">3.3 Comparing LLM Performance with Traditional Supervised Learning</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../session04/index.html">Session 4: Generative Explanations and Summaries in Social Science</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../session04/lecture1.html">4.1 Using LLMs for High-Quality Text Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session04/lecture2.html">4.2 Social Bias Inference and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session04/lecture3.html">4.3 Figurative Language Explanation and Cultural Context</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../session05/index.html">Session 5: Advanced Applications of LLMs in Social Science Research</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../session05/lecture1.html">5.1 Analyzing Large-Scale Textual Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session05/lecture2.html">5.2 Misinformation and Fake News Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session05/lecture3.html">5.3 Future Directions and Emerging Trends</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../extras/extra01.html">Extra 1: The Evolution and Impact of LLMs in Social Science Research</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extras/extra02.html">Extra 2: Text Representation and NLP Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extras/extra03.html">Extra 3: Practical Considerations for Using LLMs in Social Science Research</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extras/extra04.html">Extra 4: Advanced Considerations for LLMs in Social Science Research</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../labs/nlp4ss-lab-1.html">Lab Session 1: Introduction to NLP for Social Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/nlp4ss-lab-2.html">Lab Session 2: LLMs for Data Annotation and Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/nlp4ss-lab-3.html">Lab Session 3: Applying Traditional NLP Techniques</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Projects</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="nlp4ss-project-1.html">NLP Analysis of Sierra Club Press Releases</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Climate Risk Analysis of Sierra Club Press Releases</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus/index.html">Course Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">Who made this book?</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/entelecheia/nlp4ss/blob/main/book/en/projects/nlp4ss-project-2.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/entelecheia/nlp4ss" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/entelecheia/nlp4ss/edit/main/book/en/projects/nlp4ss-project-2.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/entelecheia/nlp4ss/issues/new?title=Issue%20on%20page%20%2Fprojects/nlp4ss-project-2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/projects/nlp4ss-project-2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Climate Risk Analysis of Sierra Club Press Releases</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#project-overview">Project Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-and-data-loading">Setup and Data Loading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-initial-climate-risk-keywords">Define Initial Climate Risk Keywords</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expand-keywords-using-word-embeddings">Expand Keywords Using Word Embeddings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#text-preprocessing">Text Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tf-idf-analysis">TF-IDF Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bert-based-analysis">BERT-based Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results-analysis-and-visualization">Results Analysis and Visualization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series-analysis">Time Series Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keyword-frequency-analysis">Keyword Frequency Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="climate-risk-analysis-of-sierra-club-press-releases">
<h1>Climate Risk Analysis of Sierra Club Press Releases<a class="headerlink" href="#climate-risk-analysis-of-sierra-club-press-releases" title="Link to this heading">#</a></h1>
<section id="project-overview">
<h2>Project Overview<a class="headerlink" href="#project-overview" title="Link to this heading">#</a></h2>
<p>This project aims to analyze Sierra Club press releases to identify and quantify mentions of climate risks, focusing on transition risks and physical risks. We’ll use both traditional (TF-IDF) and modern (BERT) NLP techniques to process and analyze the text data.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<p>Before we begin, let’s install the necessary packages for this lab. Run the following cell to install the required libraries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install nlp4ss
</pre></div>
</div>
</div>
</div>
</section>
<section id="setup-and-data-loading">
<h2>Setup and Data Loading<a class="headerlink" href="#setup-and-data-loading" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We import necessary libraries and initialize the project environment using HyFI.</p></li>
<li><p>NLTK data is downloaded for text processing tasks.</p></li>
<li><p>The Sierra Club press release data is loaded from a JSONL file into a pandas DataFrame.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hyfi</span> <span class="kn">import</span> <span class="n">HyFI</span>

<span class="k">if</span> <span class="n">HyFI</span><span class="o">.</span><span class="n">is_colab</span><span class="p">():</span>
    <span class="n">HyFI</span><span class="o">.</span><span class="n">mount_google_drive</span><span class="p">()</span>
    <span class="n">project_root</span> <span class="o">=</span> <span class="s2">&quot;/content/drive/MyDrive/nlp4ss&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">project_root</span> <span class="o">=</span> <span class="s2">&quot;$HOME/workspace/courses/nlp4ss&quot;</span>

<span class="n">h</span> <span class="o">=</span> <span class="n">HyFI</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span>
    <span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;nlp4ss&quot;</span><span class="p">,</span>
    <span class="n">project_root</span><span class="o">=</span><span class="n">project_root</span><span class="p">,</span>
    <span class="n">logging_level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Project directory:&quot;</span><span class="p">,</span> <span class="n">h</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">root_dir</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Project workspace directory:&quot;</span><span class="p">,</span> <span class="n">h</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">workspace_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/yjlee/.venvs/nlp4ss/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
  from .autonotebook import tqdm as notebook_tqdm
INFO:hyfi.utils.notebooks:Extension autotime not found. Install it first.
INFO:hyfi.joblib.joblib:initialized batcher with &lt;hyfi.joblib.batcher.batcher.Batcher object at 0x7f1b3fe9b2b0&gt;
INFO:hyfi.main.config:HyFi project [nlp4ss] initialized
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Project directory: /home/yjlee/workspace/courses/nlp4ss
Project workspace directory: /home/yjlee/workspace/courses/nlp4ss/workspace
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">nltk</span>
<span class="kn">from</span> <span class="nn">nltk.tokenize</span> <span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">WordNetLemmatizer</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="kn">import</span> <span class="nn">gensim.downloader</span> <span class="k">as</span> <span class="nn">api</span>
<span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">BertTokenizer</span><span class="p">,</span> <span class="n">BertModel</span>
<span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="kn">import</span> <span class="n">cosine_similarity</span>

<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;punkt&quot;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;punkt_tab&quot;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;stopwords&quot;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;wordnet&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[nltk_data] Downloading package punkt to /home/yjlee/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package punkt_tab to /home/yjlee/nltk_data...
[nltk_data]   Package punkt_tab is already up-to-date!
[nltk_data] Downloading package stopwords to /home/yjlee/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
[nltk_data] Downloading package wordnet to /home/yjlee/nltk_data...
[nltk_data]   Package wordnet is already up-to-date!
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data</span>
<span class="n">raw_data_file</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">workspace_dir</span> <span class="o">/</span> <span class="s2">&quot;data/raw/articles.jsonl&quot;</span>
<span class="n">rdata</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">data_files</span><span class="o">=</span><span class="n">raw_data_file</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">rdata</span><span class="p">[</span><span class="s2">&quot;train&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Sample of the data:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># Sample data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6354 entries, 0 to 6353
Data columns (total 7 columns):
 #   Column     Non-Null Count  Dtype 
---  ------     --------------  ----- 
 0   title      6354 non-null   object
 1   timestamp  6354 non-null   object
 2   url        6354 non-null   object
 3   page_url   6354 non-null   object
 4   page       6354 non-null   int64 
 5   content    6354 non-null   object
 6   uuid       6354 non-null   object
dtypes: int64(1), object(6)
memory usage: 347.6+ KB
None

Sample of the data:
                                               title       timestamp  \
0  Sierra Club Urges Commerce Department to Hold ...  April 15, 2024   
1  Sierra Club Statement on BOEM Financial Assura...  April 15, 2024   
2  We Energies Files Third Rate Increase in Three...  April 15, 2024   
3  MEDIA ADVISORY: Oregon Regulators to Hear Conc...  April 12, 2024   
4  Advisory: Special Meeting for County Commissio...  April 12, 2024   

                                                 url  \
0  https://www.sierraclub.org/press-releases/2024...   
1  https://www.sierraclub.org/press-releases/2024...   
2  https://www.sierraclub.org/press-releases/2024...   
3  https://www.sierraclub.org/press-releases/2024...   
4  https://www.sierraclub.org/press-releases/2024...   

                                            page_url  page  \
0  https://www.sierraclub.org/press-releases?_wra...     1   
1  https://www.sierraclub.org/press-releases?_wra...     1   
2  https://www.sierraclub.org/press-releases?_wra...     1   
3  https://www.sierraclub.org/press-releases?_wra...     1   
4  https://www.sierraclub.org/press-releases?_wra...     1   

                                             content  \
0  April 15, 2024\n\n\nContact\nAda Recinos, Depu...   
1  April 15, 2024\n\n\nContact\nIan Brickey, ian....   
2  April 15, 2024\n\n\nContact\nMegan Wittman, me...   
3  April 12, 2024\n\n\nContact\nKim Petty, Sierra...   
4  April 12, 2024\n\n\nContact\nLee Ziesche, lee....   

                                   uuid  
0  9ee69b6c-cd7a-4617-94d2-18951266c182  
1  deed5268-32a0-4607-9c0e-e4f565b189f7  
2  c0486029-319a-46c8-9622-56bdd61fd9e5  
3  3ebc6ab6-15a5-4ccc-953b-593965ae0ad8  
4  924abe2c-586d-4087-b4f2-208b731ebb2b  
</pre></div>
</div>
</div>
</div>
</section>
<section id="define-initial-climate-risk-keywords">
<h2>Define Initial Climate Risk Keywords<a class="headerlink" href="#define-initial-climate-risk-keywords" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We start with two lists of initial keywords: one for transition risks and another for physical risks.</p></li>
<li><p>These keywords are based on common terms associated with each type of climate risk.</p></li>
</ul>
<blockquote>
<div><p>Bua, G., Kapp, D., Ramella, F., &amp; Rognone, L. (2024). Transition versus physical climate risk pricing in European financial markets: A text-based approach. The European Journal of Finance, 1-35.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initial keyword lists</span>
<span class="n">initial_transition_risk_keywords</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;EJ/YR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Radiative Forcing&quot;</span><span class="p">,</span>
    <span class="s2">&quot;HCFC&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ozone&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Bioenergy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Technical Potential&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GHG Emissions&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Refrigerant&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IPCC&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GHG&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ozone Layer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Geothermal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Pathways&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Exajoules&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Biomass&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Hydropower&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GigaJoules&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Photovoltaics&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Chlorofluorocarbon&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Heat Pumps&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ocean Energies&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Carbon Dioxide Capture and Storage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Mitigation Scenarios&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Lifecycle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;USD/kWh&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Fluid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Equivalent CO2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Methane&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Halon&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Blowing Agent&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Aerosols&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Leakage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Sustainable Development&quot;</span><span class="p">,</span>
    <span class="s2">&quot;UNEP&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Montreal Protocol&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Anthropogenic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Radiative&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Wind Energy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Solar energy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Hydrogen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;UNFCCC&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Product carbon footprints&quot;</span><span class="p">,</span>
    <span class="s2">&quot;report safeguarding&quot;</span><span class="p">,</span>
    <span class="s2">&quot;geological storage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;direct solar&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Reservoir&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IEA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;anthropogenic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;adaptation options&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ecosystems&quot;</span><span class="p">,</span>
    <span class="s2">&quot;global warming potential&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ozone-depleting substances&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GTCO2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;global warming&quot;</span><span class="p">,</span>
    <span class="s2">&quot;primary energies&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ocean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;atmosphere&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EQ/YR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dioxide capture and storage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;methane&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ocean storage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;equivalent&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dioxide capture&quot;</span><span class="p">,</span>
    <span class="s2">&quot;change mitigation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;teap&quot;</span><span class="p">,</span>
    <span class="s2">&quot;levels cost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;energies systems&quot;</span><span class="p">,</span>
    <span class="s2">&quot;life cycle climate performance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mitigation options&quot;</span><span class="p">,</span>
    <span class="s2">&quot;capacity factors&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TWH/YR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;feedstock&quot;</span><span class="p">,</span>
    <span class="s2">&quot;foam&quot;</span><span class="p">,</span>
    <span class="s2">&quot;solvent&quot;</span><span class="p">,</span>
    <span class="s2">&quot;biofuels&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ozone depletion&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sustainable development&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Tco2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MTCO2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MTCO2 EQ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stratospheric&quot;</span><span class="p">,</span>
    <span class="s2">&quot;climate systems&quot;</span><span class="p">,</span>
    <span class="s2">&quot;troposphere&quot;</span><span class="p">,</span>
    <span class="s2">&quot;investment cost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;human system&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">initial_physical_risk_keywords</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;coastal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ecosystem services&quot;</span><span class="p">,</span>
    <span class="s2">&quot;climate models&quot;</span><span class="p">,</span>
    <span class="s2">&quot;wetlands&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ipcc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;adaptation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ryosphere&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ice sheet&quot;</span><span class="p">,</span>
    <span class="s2">&quot;biodiversity&quot;</span><span class="p">,</span>
    <span class="s2">&quot;species&quot;</span><span class="p">,</span>
    <span class="s2">&quot;phytoplankton&quot;</span><span class="p">,</span>
    <span class="s2">&quot;antarctic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;climate variables&quot;</span><span class="p">,</span>
    <span class="s2">&quot;biophysical&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ghg&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pathways&quot;</span><span class="p">,</span>
    <span class="s2">&quot;climate change&quot;</span><span class="p">,</span>
    <span class="s2">&quot;precipitation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;anthropogenic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coupled model&quot;</span><span class="p">,</span>
    <span class="s2">&quot;intercomparison projects&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cyclones&quot;</span><span class="p">,</span>
    <span class="s2">&quot;climate related&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ocean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;streamflow&quot;</span><span class="p">,</span>
    <span class="s2">&quot;adaptation response&quot;</span><span class="p">,</span>
    <span class="s2">&quot;change impacts&quot;</span><span class="p">,</span>
    <span class="s2">&quot;observed change&quot;</span><span class="p">,</span>
    <span class="s2">&quot;socioeconomic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;freshwater&quot;</span><span class="p">,</span>
    <span class="s2">&quot;temperature increase&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coastal zones&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sea level&quot;</span><span class="p">,</span>
    <span class="s2">&quot;phenology&quot;</span><span class="p">,</span>
    <span class="s2">&quot;future climate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;upwelling&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fisheries&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hazards&quot;</span><span class="p">,</span>
    <span class="s2">&quot;general circulation models&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nutrient&quot;</span><span class="p">,</span>
    <span class="s2">&quot;adaptation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;permafrost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reefs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;water resources&quot;</span><span class="p">,</span>
    <span class="s2">&quot;terrestrial&quot;</span><span class="p">,</span>
    <span class="s2">&quot;spatial&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coral&quot;</span><span class="p">,</span>
    <span class="s2">&quot;land degradation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;RCP&quot;</span><span class="p">,</span>
    <span class="s2">&quot;adaptation planning&quot;</span><span class="p">,</span>
    <span class="s2">&quot;change climate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;glaciers&quot;</span><span class="p">,</span>
    <span class="s2">&quot;salinity&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrological variables&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sediment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tropical cyclones&quot;</span><span class="p">,</span>
    <span class="s2">&quot;latitudes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;projected change&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">preprocess_text</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="c1"># Convert to lowercase and remove special characters</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[^a-zA-Z\s]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

    <span class="c1"># Tokenize</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># Remove stopwords and short words</span>
    <span class="n">stop_words</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s2">&quot;english&quot;</span><span class="p">))</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tokens</span> <span class="k">if</span> <span class="n">t</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stop_words</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span>

    <span class="c1"># Lemmatize</span>
    <span class="n">lemmatizer</span> <span class="o">=</span> <span class="n">WordNetLemmatizer</span><span class="p">()</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">lemmatizer</span><span class="o">.</span><span class="n">lemmatize</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">]</span>

    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>


<span class="c1"># Preprocess keywords</span>
<span class="n">initial_transition_risk_keywords</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">preprocess_text</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">initial_transition_risk_keywords</span>
<span class="p">]</span>
<span class="n">initial_physical_risk_keywords</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">preprocess_text</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">initial_physical_risk_keywords</span>
<span class="p">]</span>

<span class="c1"># Remove duplicates</span>
<span class="n">initial_transition_risk_keywords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">initial_transition_risk_keywords</span><span class="p">))</span>
<span class="n">physicalinitial_physical_risk_keywords_risk_keywords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
    <span class="nb">set</span><span class="p">(</span><span class="n">initial_physical_risk_keywords</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Replace space with underscore</span>
<span class="n">initial_transition_risk_keywords</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">keyword</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">initial_transition_risk_keywords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="p">]</span>
<span class="n">initial_physical_risk_keywords</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">keyword</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">initial_physical_risk_keywords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of transition risk keywords:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_transition_risk_keywords</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transition risk keywords:&quot;</span><span class="p">,</span> <span class="n">initial_transition_risk_keywords</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of physical risk keywords:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_physical_risk_keywords</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Physical risk keywords:&quot;</span><span class="p">,</span> <span class="n">initial_physical_risk_keywords</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of transition risk keywords: 77
Transition risk keywords: [&#39;ozone_layer&#39;, &#39;pathway&#39;, &#39;aerosol&#39;, &#39;direct_solar&#39;, &#39;human_system&#39;, &#39;geothermal&#39;, &#39;report_safeguarding&#39;, &#39;carbon_dioxide_capture_storage&#39;, &#39;sustainable_development&#39;, &#39;hydrogen&#39;, &#39;global_warming_potential&#39;, &#39;lifecycle&#39;, &#39;biofuels&#39;, &#39;anthropogenic&#39;, &#39;unfccc&#39;, &#39;stratospheric&#39;, &#39;fluid&#39;, &#39;solvent&#39;, &#39;capacity_factor&#39;, &#39;foam&#39;, &#39;adaptation_option&#39;, &#39;photovoltaics&#39;, &#39;reservoir&#39;, &#39;exajoules&#39;, &#39;ozone_depletion&#39;, &#39;ocean&#39;, &#39;ejyr&#39;, &#39;radiative&#39;, &#39;heat_pump&#39;, &#39;change_mitigation&#39;, &#39;feedstock&#39;, &#39;gtco&#39;, &#39;investment_cost&#39;, &#39;methane&#39;, &#39;geological_storage&#39;, &#39;mitigation_option&#39;, &#39;hydropower&#39;, &#39;teap&#39;, &#39;hcfc&#39;, &#39;leakage&#39;, &#39;level_cost&#39;, &#39;technical_potential&#39;, &#39;troposphere&#39;, &#39;ecosystem&#39;, &#39;radiative_forcing&#39;, &#39;montreal_protocol&#39;, &#39;halon&#39;, &#39;ocean_energy&#39;, &#39;emission&#39;, &#39;unep&#39;, &#39;life_cycle_climate_performance&#39;, &#39;climate_system&#39;, &#39;ipcc&#39;, &#39;dioxide_capture&#39;, &#39;blowing_agent&#39;, &#39;wind_energy&#39;, &#39;dioxide_capture_storage&#39;, &#39;twhyr&#39;, &#39;ozone&#39;, &#39;atmosphere&#39;, &#39;gigajoules&#39;, &#39;energy_system&#39;, &#39;product_carbon_footprint&#39;, &#39;ocean_storage&#39;, &#39;mtco&#39;, &#39;usdkwh&#39;, &#39;bioenergy&#39;, &#39;global_warming&#39;, &#39;solar_energy&#39;, &#39;refrigerant&#39;, &#39;biomass&#39;, &#39;chlorofluorocarbon&#39;, &#39;primary_energy&#39;, &#39;mitigation_scenario&#39;, &#39;equivalent&#39;, &#39;ozonedepleting_substance&#39;, &#39;eqyr&#39;]
Number of physical risk keywords: 57
Physical risk keywords: [&#39;coastal&#39;, &#39;ecosystem_service&#39;, &#39;climate_model&#39;, &#39;wetland&#39;, &#39;ipcc&#39;, &#39;adaptation&#39;, &#39;ryosphere&#39;, &#39;sheet&#39;, &#39;biodiversity&#39;, &#39;specie&#39;, &#39;phytoplankton&#39;, &#39;antarctic&#39;, &#39;climate_variable&#39;, &#39;biophysical&#39;, &#39;pathway&#39;, &#39;climate_change&#39;, &#39;precipitation&#39;, &#39;anthropogenic&#39;, &#39;coupled_model&#39;, &#39;intercomparison_project&#39;, &#39;cyclone&#39;, &#39;climate_related&#39;, &#39;ocean&#39;, &#39;streamflow&#39;, &#39;adaptation_response&#39;, &#39;change_impact&#39;, &#39;observed_change&#39;, &#39;socioeconomic&#39;, &#39;freshwater&#39;, &#39;temperature_increase&#39;, &#39;coastal_zone&#39;, &#39;level&#39;, &#39;phenology&#39;, &#39;future_climate&#39;, &#39;upwelling&#39;, &#39;fishery&#39;, &#39;hazard&#39;, &#39;general_circulation_model&#39;, &#39;nutrient&#39;, &#39;adaptation&#39;, &#39;permafrost&#39;, &#39;arid&#39;, &#39;reef&#39;, &#39;water_resource&#39;, &#39;terrestrial&#39;, &#39;spatial&#39;, &#39;coral&#39;, &#39;land_degradation&#39;, &#39;adaptation_planning&#39;, &#39;change_climate&#39;, &#39;glacier&#39;, &#39;salinity&#39;, &#39;hydrological_variable&#39;, &#39;sediment&#39;, &#39;tropical_cyclone&#39;, &#39;latitude&#39;, &#39;projected_change&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="expand-keywords-using-word-embeddings">
<h2>Expand Keywords Using Word Embeddings<a class="headerlink" href="#expand-keywords-using-word-embeddings" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We use pre-trained Word2Vec embeddings to find semantically similar words to our initial keywords.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">expand_keywords</span></code> function takes a list of keywords and returns an expanded list of related terms.</p></li>
<li><p>We combine the original keywords with the expanded ones to create our final keyword lists.</p></li>
<li><p>This expansion helps capture a broader range of terms related to climate risks, potentially improving our analysis.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="c1"># Load pre-trained word embeddings</span>
<span class="n">word2vec_model</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;word2vec-google-news-300&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">expand_keywords</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">topn</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">expanded_keywords</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">similar_words</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="n">keyword</span><span class="p">,</span> <span class="n">topn</span><span class="o">=</span><span class="n">topn</span><span class="p">)</span>
            <span class="n">expanded_keywords</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">similar_words</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">continue</span>  <span class="c1"># Skip words not in the vocabulary</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">expanded_keywords</span><span class="p">)</span>


<span class="c1"># Expand keyword lists</span>
<span class="n">expanded_transition_keywords</span> <span class="o">=</span> <span class="n">expand_keywords</span><span class="p">(</span>
    <span class="n">initial_transition_risk_keywords</span><span class="p">,</span> <span class="n">word2vec_model</span>
<span class="p">)</span>
<span class="n">expanded_physical_keywords</span> <span class="o">=</span> <span class="n">expand_keywords</span><span class="p">(</span>
    <span class="n">initial_physical_risk_keywords</span><span class="p">,</span> <span class="n">word2vec_model</span>
<span class="p">)</span>

<span class="c1"># Combine original and expanded keywords</span>
<span class="n">transition_risk_keywords</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">initial_transition_risk_keywords</span> <span class="o">+</span> <span class="n">expanded_transition_keywords</span>
<span class="p">)</span>
<span class="n">physical_risk_keywords</span> <span class="o">=</span> <span class="n">initial_physical_risk_keywords</span> <span class="o">+</span> <span class="n">expanded_physical_keywords</span>

<span class="c1"># Remove duplicates</span>
<span class="n">transition_risk_keywords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">transition_risk_keywords</span><span class="p">))</span>
<span class="n">physical_risk_keywords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">physical_risk_keywords</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of expanded transition risk keywords:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">transition_risk_keywords</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of expanded physical risk keywords:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">physical_risk_keywords</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expanded transition risk keywords:&quot;</span><span class="p">,</span> <span class="n">transition_risk_keywords</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expanded physical risk keywords:&quot;</span><span class="p">,</span> <span class="n">physical_risk_keywords</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:gensim.models.keyedvectors:loading projection weights from /home/yjlee/gensim-data/word2vec-google-news-300/word2vec-google-news-300.gz
INFO:gensim.utils:KeyedVectors lifecycle event {&#39;msg&#39;: &#39;loaded (3000000, 300) matrix of type float32 from /home/yjlee/gensim-data/word2vec-google-news-300/word2vec-google-news-300.gz&#39;, &#39;binary&#39;: True, &#39;encoding&#39;: &#39;utf8&#39;, &#39;datetime&#39;: &#39;2024-08-23T12:09:38.654130&#39;, &#39;gensim&#39;: &#39;4.3.3&#39;, &#39;python&#39;: &#39;3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0]&#39;, &#39;platform&#39;: &#39;Linux-5.15.0-1029-nvidia-x86_64-with-glibc2.35&#39;, &#39;event&#39;: &#39;load_word2vec_format&#39;}
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of expanded transition risk keywords: 221
Number of expanded physical risk keywords: 201
Expanded transition risk keywords: [&#39;equals&#39;, &#39;pathway&#39;, &#39;aerosol&#39;, &#39;ozone_layer&#39;, &#39;stratospherically&#39;, &#39;astronomic&#39;, &#39;leaks&#39;, &#39;metal_hydride&#39;, &#39;geothermal&#39;, &#39;montreal_protocol&#39;, &#39;dioxide_capture&#39;, &#39;atlantic_ocean&#39;, &#39;seepage&#39;, &#39;aquatic_ecosystem&#39;, &#39;atmopshere&#39;, &#39;supply_chain&#39;, &#39;ozone_concentrations&#39;, &#39;geothermic&#39;, &#39;dioxide_capture_storage&#39;, &#39;lignol_modified&#39;, &#39;petrochemical_feedstock&#39;, &#39;photovoltaics_pv&#39;, &#39;hydrogen&#39;, &#39;solar_energy&#39;, &#39;lifecycle&#39;, &#39;biofuels&#39;, &#39;radiative_forcing&#39;, &#39;polyurethane_foam&#39;, &#39;mtoe&#39;, &#39;direct_solar&#39;, &#39;renewable_fuels&#39;, &#39;hydro&#39;, &#39;manmade_global_warming&#39;, &#39;chlorofluorocarbon_cfc&#39;, &#39;pacific_ocean&#39;, &#39;ozonedepleting_substance&#39;, &#39;anthropogenic&#39;, &#39;unfccc&#39;, &#39;carbon_dioxide&#39;, &#39;ecosytem&#39;, &#39;polariton&#39;, &#39;atmospheric_co2&#39;, &#39;equivilant&#39;, &#39;stratospheric&#39;, &#39;marine_ecosystem&#39;, &#39;equates&#39;, &#39;fluid&#39;, &#39;solvent&#39;, &#39;life_cycle_climate_performance&#39;, &#39;stratospheric_ozone_depletion&#39;, &#39;renewable_feedstocks&#39;, &#39;foam&#39;, &#39;greenhouse_warming&#39;, &#39;lifecycles&#39;, &#39;biorefining&#39;, &#39;photovoltaics&#39;, &#39;cellulosic_ethanol&#39;, &#39;hydrogen_fuel&#39;, &#39;reservoir&#39;, &#39;methane_gas&#39;, &#39;stratospheric_ozone_layer&#39;, &#39;exajoules&#39;, &#39;polaritons&#39;, &#39;pathways&#39;, &#39;ocean&#39;, &#39;dam&#39;, &#39;sustainable_development&#39;, &#39;report_safeguarding&#39;, &#39;refrigerants&#39;, &#39;r###a&#39;, &#39;terawatts&#39;, &#39;ejyr&#39;, &#39;anthropogenic_climate&#39;, &#39;sulfate_aerosol&#39;, &#39;mesosphere&#39;, &#39;r_###a_refrigerant&#39;, &#39;kwh&#39;, &#39;cfcs_chlorofluorocarbons&#39;, &#39;level_cost&#39;, &#39;oceans&#39;, &#39;ocean_energy&#39;, &#39;ozone_depletion&#39;, &#39;radiative&#39;, &#39;cosmic_ray_flux&#39;, &#39;solar_thermal&#39;, &#39;greenhouse_gases&#39;, &#39;woody_biomass&#39;, &#39;foam_insulation&#39;, &#39;solvents&#39;, &#39;hydrogen_powered&#39;, &#39;##twh&#39;, &#39;capacity_factor&#39;, &#39;human_system&#39;, &#39;feedstock&#39;, &#39;gtco&#39;, &#39;lifecyle&#39;, &#39;photovoltaic&#39;, &#39;groundwater_aquifer&#39;, &#39;##kwh&#39;, &#39;dizzying_heights&#39;, &#39;tropopause&#39;, &#39;methane&#39;, &#39;ormat&#39;, &#39;technical_potential&#39;, &#39;geo_thermal&#39;, &#39;fluids&#39;, &#39;atmospheres&#39;, &#39;emmissions&#39;, &#39;astronomical&#39;, &#39;typing_optical_trackpad&#39;, &#39;gigawatts_gw&#39;, &#39;hydropower_plants&#39;, &#39;hydro_electric&#39;, &#39;greenhouse_gas_emission&#39;, &#39;ecosystems&#39;, &#39;insulation_foam&#39;, &#39;hydropower&#39;, &#39;teap&#39;, &#39;hcfc&#39;, &#39;sugar_cane_bagasse&#39;, &#39;upper_troposphere&#39;, &#39;biomass_feedstock&#39;, &#39;sniffing_glue_lighter&#39;, &#39;solar_cells&#39;, &#39;leakage&#39;, &#39;quadrillion_btus&#39;, &#39;leakages&#39;, &#39;aerosolized&#39;, &#39;forcings&#39;, &#39;extracted_groundnut&#39;, &#39;carbon_emission&#39;, &#39;emissions&#39;, &#39;troposphere&#39;, &#39;ecosystem&#39;, &#39;mitigation_option&#39;, &#39;mitigation_scenario&#39;, &#39;fine_particle_pollution&#39;, &#39;surfactant_replacement_therapies&#39;, &#39;change_mitigation&#39;, &#39;oceanic&#39;, &#39;atmostphere&#39;, &#39;kw_h&#39;, &#39;stratosphere&#39;, &#39;solar_irradiance&#39;, &#39;fluorocarbons&#39;, &#39;bio_fuels&#39;, &#39;adaptation_option&#39;, &#39;wind_energy&#39;, &#39;halon&#39;, &#39;aerosols&#39;, &#39;equivalents&#39;, &#39;ionosphere&#39;, &#39;emission&#39;, &#39;vapor_degreasing&#39;, &#39;unep&#39;, &#39;primary_energy&#39;, &#39;climate_system&#39;, &#39;ozone_smog&#39;, &#39;reservoirs&#39;, &#39;carbon_dioxide_co2&#39;, &#39;dipole_moment&#39;, &#39;geological_storage&#39;, &#39;carbon_dioxide_capture_storage&#39;, &#39;ipcc&#39;, &#39;stratospheric_ozone&#39;, &#39;ozone_depleting_substance&#39;, &#39;bipv&#39;, &#39;ozone_pollution&#39;, &#39;ambience&#39;, &#39;ozone&#39;, &#39;twhyr&#39;, &#39;alternative_fuels&#39;, &#39;atmosphere&#39;, &#39;solar_photovoltaics&#39;, &#39;leak&#39;, &#39;gigajoules&#39;, &#39;investment_cost&#39;, &#39;global_warming_potential&#39;, &#39;signaling_pathway&#39;, &#39;hfc_###a&#39;, &#39;lifecycle_management&#39;, &#39;water_vapor&#39;, &#39;paths&#39;, &#39;pericardial_sac&#39;, &#39;aerosol_spray&#39;, &#39;hydroelectric&#39;, &#39;energy_system&#39;, &#39;biofuel&#39;, &#39;mtco&#39;, &#39;heat_pump&#39;, &#39;earth_ozone_layer&#39;, &#39;chlorofluorocarbons_cfcs&#39;, &#39;climate_change&#39;, &#39;usdkwh&#39;, &#39;ocean_storage&#39;, &#39;path&#39;, &#39;sea&#39;, &#39;dispersive&#39;, &#39;molecular_pathway&#39;, &#39;ambiance&#39;, &#39;global_warming&#39;, &#39;equivilent&#39;, &#39;product_carbon_footprint&#39;, &#39;bioenergy&#39;, &#39;blowing_agent&#39;, &#39;protective_ozone_layer&#39;, &#39;hydro_electric_power&#39;, &#39;hydrogen_fueling&#39;, &#39;insulating_foam&#39;, &#39;refrigerant&#39;, &#39;biomass&#39;, &#39;halons&#39;, &#39;hydrofluorocarbon&#39;, &#39;chlorofluorocarbon&#39;, &#39;ethanol&#39;, &#39;feedstocks&#39;, &#39;equivalent&#39;, &#39;gases&#39;, &#39;kilowatthours&#39;, &#39;co2_emission&#39;, &#39;eqyr&#39;]
Expanded physical risk keywords: [&#39;freshwater_wetlands&#39;, &#39;project_budburst&#39;, &#39;pathway&#39;, &#39;hazard&#39;, &#39;costal&#39;, &#39;arowana&#39;, &#39;atlantic_ocean&#39;, &#39;computational_methods&#39;, &#39;danger&#39;, &#39;spatial&#39;, &#39;hydrologic&#39;, &#39;spacial&#39;, &#39;precip&#39;, &#39;hazardous&#39;, &#39;arctic_permafrost&#39;, &#39;coastal&#39;, &#39;adaptations&#39;, &#39;ecosystem_service&#39;, &#39;echelon&#39;, &#39;upwelling&#39;, &#39;radiative_forcing&#39;, &#39;terrestrial&#39;, &#39;salinity&#39;, &#39;adaptation_planning&#39;, &#39;bio_diversity&#39;, &#39;estuaries&#39;, &#39;pangolin&#39;, &#39;terrestial&#39;, &#39;pacific_ocean&#39;, &#39;levels&#39;, &#39;anthropogenic&#39;, &#39;water_resource&#39;, &#39;atmospheric_co2&#39;, &#39;corals&#39;, &#39;tropical_storm&#39;, &#39;wetland&#39;, &#39;spatio_temporal&#39;, &#39;biological_macromolecules&#39;, &#39;species&#39;, &#39;permafrost&#39;, &#39;rainfall&#39;, &#39;educational_attainment&#39;, &#39;latitude_coordinates&#39;, &#39;greenhouse_warming&#39;, &#39;adaptation_response&#39;, &#39;sediments&#39;, &#39;about_musicnotes_musicnotes&#39;, &#39;thawing_permafrost&#39;, &#39;level&#39;, &#39;general_circulation_model&#39;, &#39;pathways&#39;, &#39;terrestrially&#39;, &#39;level.the&#39;, &#39;future_climate&#39;, &#39;ocean&#39;, &#39;freshwater&#39;, &#39;coast&#39;, &#39;climate&#39;, &#39;snowfall&#39;, &#39;melting_permafrost&#39;, &#39;land_degradation&#39;, &#39;corrugated_container&#39;, &#39;nutrient&#39;, &#39;inland&#39;, &#39;phenology&#39;, &#39;temperature_increase&#39;, &#39;anthropogenic_climate&#39;, &#39;salmon_fishery&#39;, &#39;coral_reefs&#39;, &#39;oceans&#39;, &#39;change_impact&#39;, &#39;reef&#39;, &#39;lakes&#39;, &#39;microbial_ecology&#39;, &#39;fisheries&#39;, &#39;observed_change&#39;, &#39;change_climate&#39;, &#39;icecap&#39;, &#39;sheet&#39;, &#39;coastlines&#39;, &#39;biodiversity_conservation&#39;, &#39;dissolved_oxygen_levels&#39;, &#39;specie&#39;, &#39;ryosphere&#39;, &#39;parched&#39;, &#39;cyclone_nargis&#39;, &#39;photoperiodic&#39;, &#39;phytoplankton_bloom&#39;, &#39;pollinator&#39;, &#39;hydrological_variable&#39;, &#39;cyclone&#39;, &#39;climate_variable&#39;, &#39;adaption&#39;, &#39;phosphorus&#39;, &#39;wiggle_room&#39;, &#39;ecosystems&#39;, &#39;antarctica&#39;, &#39;antartic&#39;, &#39;cod_fisheries&#39;, &#39;projected_change&#39;, &#39;streamflows&#39;, &#39;terrestrial_analogue&#39;, &#39;salinities&#39;, &#39;streamflow&#39;, &#39;snowpacks&#39;, &#39;adapation&#39;, &#39;socio_economic&#39;, &#39;sediment&#39;, &#39;recreational_fishery&#39;, &#39;contaminated_sediment&#39;, &#39;upwellings&#39;, &#39;coastline&#39;, &#39;glacier&#39;, &#39;oceanic&#39;, &#39;cycad&#39;, &#39;cyclones&#39;, &#39;critically_endangered&#39;, &#39;socioeconomic_backgrounds&#39;, &#39;coral&#39;, &#39;cyclone_giri&#39;, &#39;siberian_permafrost&#39;, &#39;streamflow_forecasts&#39;, &#39;spitzbergen&#39;, &#39;arid_lands&#39;, &#39;cinematic_adaptation&#39;, &#39;biophysical&#39;, &#39;herring_fishery&#39;, &#39;reefs&#39;, &#39;coral_reef&#39;, &#39;ocean_upwelling&#39;, &#39;adapatation&#39;, &#39;arid&#39;, &#39;phenological&#39;, &#39;sedimentation&#39;, &#39;threshold&#39;, &#39;receding_glaciers&#39;, &#39;ipcc&#39;, &#39;coastal_zone&#39;, &#39;socioeconomic_status&#39;, &#39;adaptation&#39;, &#39;floodplain&#39;, &#39;lattitude&#39;, &#39;freshwater_lakes&#39;, &#39;latitude&#39;, &#39;antarctic&#39;, &#39;climate_related&#39;, &#39;dissolved_oxygen&#39;, &#39;hazards&#39;, &#39;computational_algorithms&#39;, &#39;silt&#39;, &#39;signaling_pathway&#39;, &#39;arid_regions&#39;, &#39;paths&#39;, &#39;uses_perpendicular_lenticular&#39;, &#39;metabolomic&#39;, &#39;terrestrial_transmitters&#39;, &#39;arid_desert&#39;, &#39;spatially&#39;, &#39;tripping_hazard&#39;, &#39;sheets&#39;, &#39;marine_biodiversity&#39;, &#39;phytoplankton&#39;, &#39;nutrients&#39;, &#39;icefield&#39;, &#39;biodiversity&#39;, &#39;semi_arid&#39;, &#39;soil_salinity&#39;, &#39;socioeconomic&#39;, &#39;fishery&#39;, &#39;phytoplankton_blooms&#39;, &#39;plankton&#39;, &#39;climate_change&#39;, &#39;plankton_blooms&#39;, &#39;wetland_habitat&#39;, &#39;precipitation&#39;, &#39;path&#39;, &#39;saltwater&#39;, &#39;leeway&#39;, &#39;climate_model&#39;, &#39;sea&#39;, &#39;fringing_reef&#39;, &#39;molecular_pathway&#39;, &#39;wetlands&#39;, &#39;glaciers&#39;, &#39;global_warming&#39;, &#39;discretion&#39;, &#39;hazzard&#39;, &#39;spatiotemporal&#39;, &#39;freshwater_habitats&#39;, &#39;coupled_model&#39;, &#39;micronutrients&#39;, &#39;tropical_cyclone&#39;, &#39;glacial_ice&#39;, &#39;socioeconomics&#39;, &#39;adélie_penguins&#39;, &#39;topological&#39;, &#39;diatoms&#39;, &#39;nitrogen&#39;, &#39;zooplankton&#39;, &#39;intercomparison_project&#39;, &#39;tropical_depression&#39;]
CPU times: user 2min 32s, sys: 1min 48s, total: 4min 21s
Wall time: 35.5 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="text-preprocessing">
<h2>Text Preprocessing<a class="headerlink" href="#text-preprocessing" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We define a function to preprocess the text, which includes:</p>
<ul>
<li><p>Converting to lowercase</p></li>
<li><p>Tokenizing the text</p></li>
<li><p>Creating both unigrams and bigrams</p></li>
</ul>
</li>
<li><p>This preprocessing step is crucial for capturing both single words and two-word phrases in our analysis.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preprocess text to include bigrams</span>
<span class="k">def</span> <span class="nf">preprocess_text_with_bigrams</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="c1"># Convert to lowercase and tokenize</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="n">preprocess_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="c1"># Create unigrams and bigrams</span>
    <span class="n">unigrams</span> <span class="o">=</span> <span class="n">tokens</span>
    <span class="n">bigrams</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">unigrams</span> <span class="o">+</span> <span class="n">bigrams</span>


<span class="c1"># Update the dataframe with preprocessed text including bigrams</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">preprocess_text_with_bigrams</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Print the updated dataframe</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>processed_content_bigrams</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5775</th>
      <td>april contact emily pomilio emilypomiliosierra...</td>
    </tr>
    <tr>
      <th>1840</th>
      <td>october contact shiloh hernandez earthjustice ...</td>
    </tr>
    <tr>
      <th>4272</th>
      <td>december contact courtney bourgoin courtneybou...</td>
    </tr>
    <tr>
      <th>80</th>
      <td>black household face disproportionately high e...</td>
    </tr>
    <tr>
      <th>3133</th>
      <td>february contact gabby brown gabbybrownsierrac...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="tf-idf-analysis">
<h2>TF-IDF Analysis<a class="headerlink" href="#tf-idf-analysis" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We use TF-IDF (Term Frequency-Inverse Document Frequency) to analyze the importance of climate risk keywords in each document.</p></li>
<li><p>The TF-IDF vectorizer is configured to use our specific climate risk vocabulary.</p></li>
<li><p>We calculate separate scores for transition risks and physical risks based on the TF-IDF matrix.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="c1"># TF-IDF Analysis with bigrams</span>
<span class="n">tfidf_vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span>
    <span class="n">vocabulary</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="n">transition_risk_keywords</span> <span class="o">+</span> <span class="n">physical_risk_keywords</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">tfidf_matrix</span> <span class="o">=</span> <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">])</span>

<span class="c1"># Calculate risk scores using sum method</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score_sum&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tfidf_matrix</span><span class="p">[</span>
    <span class="p">:,</span>
    <span class="p">[</span>
        <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">vocabulary_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">transition_risk_keywords</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">vocabulary_</span>
    <span class="p">],</span>
<span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score_sum&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tfidf_matrix</span><span class="p">[</span>
    <span class="p">:,</span>
    <span class="p">[</span>
        <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">vocabulary_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">physical_risk_keywords</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">vocabulary_</span>
    <span class="p">],</span>
<span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Calculate risk scores using cosine similarity</span>
<span class="n">transition_risk_keywords_vector</span> <span class="o">=</span> <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">transition_risk_keywords</span><span class="p">)</span>
<span class="n">physical_risk_keywords_vector</span> <span class="o">=</span> <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">physical_risk_keywords</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score_sim&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">cosine_similarity</span><span class="p">(</span>
        <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x</span><span class="p">]),</span> <span class="n">transition_risk_keywords_vector</span>
    <span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score_sim&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">cosine_similarity</span><span class="p">(</span>
        <span class="n">tfidf_vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x</span><span class="p">]),</span> <span class="n">physical_risk_keywords_vector</span>
    <span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span>

<span class="c1"># Normalize scores</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span>
    <span class="s2">&quot;tfidf_transition_score_sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tfidf_physical_score_sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tfidf_transition_score_sim&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tfidf_physical_score_sim&quot;</span><span class="p">,</span>
<span class="p">]:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>

<span class="c1"># Combine scores</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score_sum&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score_sim&quot;</span><span class="p">]</span>
<span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score_sum&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score_sim&quot;</span><span class="p">]</span>
<span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 801 ms, sys: 651 μs, total: 802 ms
Wall time: 802 ms
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display results</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Top 10 articles by TF-IDF physical risk score (combined):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">,</span> <span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Top 10 articles by TF-IDF transition risk score (combined):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">,</span> <span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Visualization</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;TF-IDF Transition Risk Score (Combined)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;TF-IDF Physical Risk Score (Combined)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;TF-IDF: Transition vs Physical Risk in Sierra Club Press Releases&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Top 10 articles by TF-IDF physical risk score (combined):
                              processed_content_bigrams  tfidf_physical_score
3896  government national climate assessment directl...              1.000000
2715  tongass national forest jeopardized push aband...              0.767211
1199  group file petition affidavit louisiana offici...              0.718412
4442  october contact trey pollard treypollardsierra...              0.714806
3494  september contact adam beitman adambeitmansier...              0.711288
3386  october contact gabby brown sierra club gabbyb...              0.705285
2464  enero contacto javier sierra javiersierrasierr...              0.697268
425   september contact larisa manescu larisamanescu...              0.682795
5889  february contact shane levy shanelevysierraclu...              0.669556
4578  august contact ricky junquera rickyjunquerasie...              0.655046

Top 10 articles by TF-IDF transition risk score (combined):
                              processed_content_bigrams  \
393   october contact dominguez amydominguezsierracl...   
208   fullyconstructed wind turbine power massachuse...   
5925  january contact emily pomilio emilypomiliosier...   
4872  unanimous decision norman city council adopts ...   
2847  business support bold action energy modernizat...   
5058  mountain valley pipeline announces plan expand...   
2755  september contact emily pomilio emilypomiliosi...   
4050  february contact lauren lantry laurenlantrysie...   
4411  wake county becomes county state nationally ad...   
3551  august contact cywinski timcywinskisierraclubo...   

      tfidf_transition_score  
393                 1.000000  
208                 0.880798  
5925                0.753404  
4872                0.732780  
2847                0.732336  
5058                0.712532  
2755                0.706397  
4050                0.705275  
4411                0.681453  
3551                0.680237  
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/3b94806f7be305ae1924a8ea40de01aef8b20e4cc6333e54eaa719c345b195d2.png"><img alt="../_images/3b94806f7be305ae1924a8ea40de01aef8b20e4cc6333e54eaa719c345b195d2.png" src="../_images/3b94806f7be305ae1924a8ea40de01aef8b20e4cc6333e54eaa719c345b195d2.png" style="width: 1001px; height: 546px;" /></a>
</div>
</div>
</section>
<section id="bert-based-analysis">
<h2>BERT-based Analysis<a class="headerlink" href="#bert-based-analysis" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We use BERT (Bidirectional Encoder Representations from Transformers) for a more context-aware analysis of climate risk mentions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">get_bert_embedding</span></code> function generates embeddings for text using BERT.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">contextual_keyword_importance</span></code> function calculates the importance of keywords in the context of each document, considering both semantic similarity (via BERT embeddings) and keyword frequency.</p></li>
<li><p>We calculate BERT-based scores for both transition and physical risks.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if GPU is available</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda&quot;</span> <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using device: </span><span class="si">{</span><span class="n">device</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="c1"># Load pre-trained BERT model and tokenizer</span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">BertTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">&quot;bert-base-uncased&quot;</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">BertModel</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">&quot;bert-base-uncased&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Using device: cuda
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="k">def</span> <span class="nf">get_bert_embedding</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="p">(</span>
        <span class="n">text</span><span class="p">,</span> <span class="n">return_tensors</span><span class="o">=</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="n">truncation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">512</span>
    <span class="p">)</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">outputs</span><span class="o">.</span><span class="n">last_hidden_state</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">contextual_keyword_importance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">keywords</span><span class="p">):</span>
    <span class="c1"># Get BERT embeddings for the full text and keywords</span>
    <span class="n">text_embedding</span> <span class="o">=</span> <span class="n">get_bert_embedding</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">keyword_embeddings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">get_bert_embedding</span><span class="p">(</span><span class="n">keyword</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Calculate attention scores</span>
    <span class="n">attention_scores</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span>
        <span class="n">text_embedding</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">keyword_embeddings</span>
    <span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

    <span class="c1"># Count keyword occurrences (considering bigrams)</span>
    <span class="n">keyword_counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">keyword</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Combine attention scores and counts</span>
    <span class="n">importance_scores</span> <span class="o">=</span> <span class="n">attention_scores</span> <span class="o">*</span> <span class="n">keyword_counts</span>

    <span class="k">return</span> <span class="n">importance_scores</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>


<span class="c1"># Calculate BERT-based scores</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;bert_transition_score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">contextual_keyword_importance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">transition_risk_keywords</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;bert_physical_score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">contextual_keyword_importance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">physical_risk_keywords</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Normalize scores</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bert_transition_score&quot;</span><span class="p">,</span> <span class="s2">&quot;bert_physical_score&quot;</span><span class="p">]:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 45min 13s, sys: 1h 21min 40s, total: 2h 6min 54s
Wall time: 9min 33s
</pre></div>
</div>
</div>
</div>
</section>
<section id="results-analysis-and-visualization">
<h2>Results Analysis and Visualization<a class="headerlink" href="#results-analysis-and-visualization" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We display the top 10 articles for each risk type and analysis method.</p></li>
<li><p>Scatter plots are created to visualize the relationship between transition and physical risk scores for both TF-IDF and BERT methods.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display results</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Top 10 articles by TF-IDF transition risk score:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Top 10 articles by TF-IDF physical risk score:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Top 10 articles by BERT transition risk score:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;bert_transition_score&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;bert_transition_score&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Top 10 articles by BERT physical risk score:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;bert_physical_score&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;bert_physical_score&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Visualization</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;TF-IDF Transition Risk Score&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;TF-IDF Physical Risk Score&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;TF-IDF: Transition vs Physical Risk in Sierra Club Press Releases&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;bert_transition_score&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bert_physical_score&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;BERT Transition Risk Score&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;BERT Physical Risk Score&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;BERT: Transition vs Physical Risk in Sierra Club Press Releases&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Top 10 articles by TF-IDF transition risk score:
                                                content  \
393   October 2, 2023\n\n\nContact\nAmy Dominguez, A...   
208   When Fully-Constructed, the 62 Wind Turbines W...   
5925  January 24, 2017\n\n\nContact\nEmily Pomilio (...   
4872  In a unanimous decision, Norman City Council a...   
2847  Businesses Support Bold Action in Energy Moder...   
5058  Mountain Valley Pipeline Announces Plans to Ex...   
2755  September 9, 2020\n\n\nContact\nEmily Pomilio,...   
4050  February 26, 2019\n\n\nContact\nLauren Lantry,...   
4411  Wake County becomes 3rd county in state, 10th ...   
3551  August 29, 2019\n\n\nContact\nTim Cywinski, 54...   

      tfidf_transition_score  
393                 1.000000  
208                 0.880798  
5925                0.753404  
4872                0.732780  
2847                0.732336  
5058                0.712532  
2755                0.706397  
4050                0.705275  
4411                0.681453  
3551                0.680237  

Top 10 articles by TF-IDF physical risk score:
                                                content  tfidf_physical_score
3896  The U.S. Government’s National Climate Assessm...              1.000000
2715  Tongass National Forest jeopardized by push to...              0.767211
1199  Groups file petition with affidavit from Louis...              0.718412
4442  October 8, 2018\n\n\nContact\n Trey Pollard tr...              0.714806
3494  September 20, 2019\n\n\nContact\nAdam Beitman,...              0.711288
3386  October 31, 2019\n\n\nContact\nGabby Brown, Si...              0.705285
2464  20 de enero de 2021\n\n\nContacto\nJavier Sier...              0.697268
425   September 20, 2023\n\n\nContact\nLarisa Manesc...              0.682795
5889  February 13, 2017\n\n\nContact\nShane Levy - s...              0.669556
4578  August 27, 2018\n\n\nContact\n Ricky Junquera,...              0.655046

Top 10 articles by BERT transition risk score:
                                                content  bert_transition_score
503   New Poll Finds 68% Support EPA Safeguards to R...               1.000000
1533  March 15, 2022\n\n\nContact\nCarolyn Morrisroe...               0.779621
1421  Crucial for severely asthma burdened communiti...               0.751936
5925  January 24, 2017\n\n\nContact\nEmily Pomilio (...               0.710342
3896  The U.S. Government’s National Climate Assessm...               0.705046
1419  April 29, 2022\n\n\nContact\nSamantha Dynowski...               0.577527
5139  Participants call on DEQ to implement strong p...               0.503703
543   Kentucky Wants the EPA to Say it Isn’t\nJune 2...               0.487295
239   December 11, 2023\n\n\nContact\nGrace Nolan, g...               0.469511
472   Energy Department export approval failed to fu...               0.447547

Top 10 articles by BERT physical risk score:
                                                content  bert_physical_score
4541  Over 800 global events in 90 countries, includ...             1.000000
3896  The U.S. Government’s National Climate Assessm...             0.868247
1199  Groups file petition with affidavit from Louis...             0.843045
1533  March 15, 2022\n\n\nContact\nCarolyn Morrisroe...             0.823180
1703  December 21, 2021\n\n\nContact\nCourtney Naqui...             0.578368
4420  October 15, 2018\n\n\nContact\nLauren Lantry, ...             0.538403
3544  Morning Consult Poll for the Sierra Club Comes...             0.503922
5925  January 24, 2017\n\n\nContact\nEmily Pomilio (...             0.469790
239   December 11, 2023\n\n\nContact\nGrace Nolan, g...             0.461239
2018  August 11, 2021\n\n\nContact\nAdam Beitman, ad...             0.450095
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/9f5ba9f09ad818f07602616e780e59ec8a648cce177b6bb9e131011e6653b47f.png"><img alt="../_images/9f5ba9f09ad818f07602616e780e59ec8a648cce177b6bb9e131011e6653b47f.png" src="../_images/9f5ba9f09ad818f07602616e780e59ec8a648cce177b6bb9e131011e6653b47f.png" style="width: 1001px; height: 546px;" /></a>
<a class="reference internal image-reference" href="../_images/03e398f902df8e7effa8f422f811a08ee92e564b8ef5270683a58463b48135ee.png"><img alt="../_images/03e398f902df8e7effa8f422f811a08ee92e564b8ef5270683a58463b48135ee.png" src="../_images/03e398f902df8e7effa8f422f811a08ee92e564b8ef5270683a58463b48135ee.png" style="width: 1001px; height: 546px;" /></a>
</div>
</div>
</section>
<section id="time-series-analysis">
<h2>Time Series Analysis<a class="headerlink" href="#time-series-analysis" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We convert the timestamp to a datetime index and resample the data to monthly averages.</p></li>
<li><p>A time series plot is created to show how different risk scores change over time.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time series analysis</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;coerce&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Monthly average risk scores</span>
<span class="n">monthly_risks</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">)[</span>
    <span class="p">[</span>
        <span class="s2">&quot;tfidf_physical_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tfidf_transition_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bert_physical_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bert_transition_score&quot;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Plot time series</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">monthly_risks</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Monthly Average Risk Scores Over Time&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Risk Score&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;best&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 1400x700 with 0 Axes&gt;
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/3da6a7ececa6da9f6ea31723ef54be7304406141872281db0e3d5a4a22d7c70b.png"><img alt="../_images/3da6a7ececa6da9f6ea31723ef54be7304406141872281db0e3d5a4a22d7c70b.png" src="../_images/3da6a7ececa6da9f6ea31723ef54be7304406141872281db0e3d5a4a22d7c70b.png" style="width: 568px; height: 454px;" /></a>
</div>
</div>
</section>
<section id="keyword-frequency-analysis">
<h2>Keyword Frequency Analysis<a class="headerlink" href="#keyword-frequency-analysis" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>We analyze the frequency of each keyword in the entire corpus.</p></li>
<li><p>The results are displayed for the top 20 most frequent keywords in each category.</p></li>
<li><p>Bar plots are created to visualize the top 10 keywords for each risk type.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">analyze_keyword_frequency</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">df_column</span><span class="p">):</span>
    <span class="n">keyword_freq</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">keyword</span><span class="p">:</span> <span class="n">df_column</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">keyword</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">keywords</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">keyword_freq</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="n">transition_freq</span> <span class="o">=</span> <span class="n">analyze_keyword_frequency</span><span class="p">(</span>
    <span class="n">transition_risk_keywords</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">physical_freq</span> <span class="o">=</span> <span class="n">analyze_keyword_frequency</span><span class="p">(</span>
    <span class="n">physical_risk_keywords</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;processed_content_bigrams&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Top 20 most frequent transition risk keywords:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">transition_freq</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Top 20 most frequent physical risk keywords:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">physical_freq</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

<span class="c1"># Visualize top keywords</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">transition_freq</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Top 10 Transition Risk Keywords&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Keywords&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">physical_freq</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Top 10 Physical Risk Keywords&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Keywords&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Top 20 most frequent transition risk keywords:
ormat              1557
emission            777
dam                 450
sea                 375
methane             258
climate_change      237
path                153
ozone               117
ecosystem           111
leak                 90
ethanol              65
hydro                51
ocean                42
pathway              33
ipcc                 30
carbon_dioxide       22
equivalent           21
hydrogen             21
atmosphere           21
carbon_emission      20
dtype: int64

Top 20 most frequent physical risk keywords:
climate           3864
danger             681
coast              390
sea                375
level              306
climate_change     237
specie             179
path               153
coastal            123
wetland             95
hazard              63
ocean               42
nitrogen            36
pathway             33
hazardous           33
ipcc                30
sheet               21
threshold           18
coastline           15
biodiversity        15
dtype: int64
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/7443e4e8dfa6e934ac80e84dc97fd4bc2fbb964f9ab8c95b9eec234d5bbb5c81.png"><img alt="../_images/7443e4e8dfa6e934ac80e84dc97fd4bc2fbb964f9ab8c95b9eec234d5bbb5c81.png" src="../_images/7443e4e8dfa6e934ac80e84dc97fd4bc2fbb964f9ab8c95b9eec234d5bbb5c81.png" style="width: 1190px; height: 589px;" /></a>
<a class="reference internal image-reference" href="../_images/cf4f96511c6f022b9ad397f03f9801739d2e095edefb9c5417ebb2206612fbaf.png"><img alt="../_images/cf4f96511c6f022b9ad397f03f9801739d2e095edefb9c5417ebb2206612fbaf.png" src="../_images/cf4f96511c6f022b9ad397f03f9801739d2e095edefb9c5417ebb2206612fbaf.png" style="width: 1190px; height: 589px;" /></a>
</div>
</div>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>This project presents a comprehensive analysis of climate risk discussions in Sierra Club press releases, utilizing both traditional (TF-IDF) and modern (BERT) NLP techniques. By examining transition and physical risks separately, we gain valuable insights into how different aspects of climate change are addressed in environmental communications.</p>
<p>Key findings and implications:</p>
<ol class="arabic simple">
<li><p>Temporal Trends: The time series analysis reveals evolving patterns in climate risk discourse, potentially reflecting changing priorities or external events influencing the Sierra Club’s messaging.</p></li>
<li><p>Risk Type Comparison: By quantifying the emphasis on transition versus physical risks, we can understand which aspects of climate change receive more attention in the organization’s communications.</p></li>
<li><p>Keyword Analysis: The frequency analysis of specific climate risk terms provides a granular view of the most prominent topics within each risk category, offering insights into the Sierra Club’s focus areas.</p></li>
<li><p>Methodological Comparison: The use of both TF-IDF and BERT-based approaches allows for a nuanced understanding of climate risk mentions, showcasing the strengths and potential complementarity of different NLP techniques.</p></li>
<li><p>Keyword Expansion Impact: The incorporation of word embeddings to expand our initial keyword lists demonstrates how semantic relationships can enhance the detection of climate risk discussions, potentially capturing more nuanced or varied terminology.</p></li>
</ol>
<p>Limitations and Future Directions:</p>
<ul class="simple">
<li><p>While keyword expansion increases coverage, it may introduce some noise. Future work could involve refining the expanded keyword list based on domain expertise.</p></li>
<li><p>The analysis could be extended to compare results using initial versus expanded keyword lists to quantify the impact of this approach.</p></li>
<li><p>Experimenting with different word embedding models or expansion techniques could further optimize the keyword selection process.</p></li>
<li><p>Comparative analysis with other environmental organizations’ communications could provide broader context for the Sierra Club’s approach to climate risk discussion.</p></li>
</ul>
<p>This project demonstrates the potential of combining traditional and modern NLP techniques to analyze complex environmental communications. By providing a data-driven approach to understanding climate risk discourse, this analysis can inform strategic communication decisions, policy discussions, and further research in environmental studies and climate change communication.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "entelecheia/nlp4ss",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./projects"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
    <div class="giscus"></div>
<script src="https://giscus.app/client.js"        data-repo="entelecheia/nlp4ss"        data-repo-id="R_kgDOMTcakg"        data-category="Q&A"        data-category-id="DIC_kwDOMTcaks4Cgwzd"        data-mapping="pathname"        data-strict="1"        data-reactions-enabled="1"        data-emit-metadata="1"        data-input-position="bottom"        data-theme="noborder_light"        data-lang="en"        data-loading="lazy"        crossorigin="anonymous"        async></script>
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="nlp4ss-project-1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">NLP Analysis of Sierra Club Press Releases</p>
      </div>
    </a>
    <a class="right-next"
       href="../syllabus/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Course Syllabus</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#project-overview">Project Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-and-data-loading">Setup and Data Loading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-initial-climate-risk-keywords">Define Initial Climate Risk Keywords</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expand-keywords-using-word-embeddings">Expand Keywords Using Word Embeddings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#text-preprocessing">Text Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tf-idf-analysis">TF-IDF Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bert-based-analysis">BERT-based Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results-analysis-and-visualization">Results Analysis and Visualization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series-analysis">Time Series Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keyword-frequency-analysis">Keyword Frequency Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Young Joon Lee
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
